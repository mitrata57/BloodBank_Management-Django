{% extends 'base.html' %}

{% block title %}Receiver Dashboard - Blood Bank{% endblock %}

{% block content %}
<div class="container my-5">
   
    <div class="row mb-4">
        <div class="col-12">
            <h1>
                <i class="fas fa-procedures text-danger"></i> 
                Request Blood
            </h1>
            <p class="lead">Find matching blood donors near you</p>
            <hr>
        </div>
    </div>

    
    <div class="row">
        
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-file-medical"></i> Create Blood Request
                    </h5>
                </div>
                <div class="card-body">
                    <!-- Blood Request Form -->
                    <form method="POST">
                        
                        {% csrf_token %}
                        
                        <!-- Blood Type Selection -->
                        <div class="mb-3">
                            <label for="bloodType" class="form-label">
                                <i class="fas fa-tint"></i> Blood Type Needed *
                            </label>
                            <select class="form-select" id="bloodType" name="blood_type" required>
                                <option value="" selected disabled>Select blood type...</option>
                                <option value="A+">A+ (A Positive)</option>
                                <option value="A-">A- (A Negative)</option>
                                <option value="B+">B+ (B Positive)</option>
                                <option value="B-">B- (B Negative)</option>
                                <option value="O+">O+ (O Positive)</option>
                                <option value="O-">O- (O Negative)</option>
                                <option value="AB+">AB+ (AB Positive)</option>
                                <option value="AB-">AB- (AB Negative)</option>
                            </select>
                            <small class="form-text text-muted">
                                Not sure? Check your medical records or blood donation card.
                            </small>
                        </div>

                        <!-- Units Required -->
                        <div class="mb-3">
                            <label for="units" class="form-label">
                                <i class="fas fa-vial"></i> Units Required *
                            </label>
                            <input 
                                type="number" 
                                class="form-control" 
                                id="units" 
                                name="units" 
                                min="1" 
                                max="10" 
                                value="1"
                                required
                            >
                            <small class="form-text text-muted">
                                1 unit = 450ml of blood (typically 1-4 units needed per patient)
                            </small>
                        </div>

                        <!-- Urgency Level -->
                        <div class="mb-3">
                            <label for="urgency" class="form-label">
                                <i class="fas fa-exclamation-triangle"></i> Urgency Level *
                            </label>
                            <select class="form-select" id="urgency" name="urgency" required>
                                <option value="" selected disabled>Select urgency...</option>
                                <option value="critical">ðŸ”´ Critical (Within 24 hours)</option>
                                <option value="urgent">ðŸŸ¡ Urgent (2-3 days)</option>
                                <option value="normal">ðŸŸ¢ Normal (Within 1 week)</option>
                            </select>
                        </div>

                        <!-- Patient Name -->
                        <div class="mb-3">
                            <label for="patientName" class="form-label">
                                <i class="fas fa-user-injured"></i> Patient Name *
                            </label>
                            <input 
                                type="text" 
                                class="form-control" 
                                id="patientName" 
                                name="patient_name" 
                                placeholder="Enter patient's full name"
                                required
                            >
                        </div>

                        <!-- Hospital/Location -->
                        <div class="mb-3">
                            <label for="hospital" class="form-label">
                                <i class="fas fa-hospital"></i> Hospital/Location *
                            </label>
                            <input 
                                type="text" 
                                class="form-control" 
                                id="hospital" 
                                name="hospital" 
                                placeholder="e.g., Bir Hospital, Kathmandu"
                                required
                            >
                        </div>

                        <!-- Contact Number -->
                        <div class="mb-3">
                            <label for="contact" class="form-label">
                                <i class="fas fa-phone"></i> Contact Number *
                            </label>
                            <input 
                                type="tel" 
                                class="form-control" 
                                id="contact" 
                                name="contact_number" 
                                placeholder="98XXXXXXXX"
                                required
                            >
                        </div>

                        <!-- Additional Notes -->
                        <div class="mb-3">
                            <label for="notes" class="form-label">
                                <i class="fas fa-notes-medical"></i> Additional Notes (Optional)
                            </label>
                            <textarea 
                                class="form-control" 
                                id="notes" 
                                name="notes" 
                                rows="3"
                                placeholder="Any additional information (e.g., specific requirements, medical conditions)"
                            ></textarea>
                        </div>

                        <!-- Submit Button -->
                        <div class="d-grid">
                            <button type="submit" class="btn btn-danger btn-lg">
                                <i class="fas fa-paper-plane"></i> Submit Blood Request
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info Alert -->
            <div class="alert alert-info mt-4">
                <i class="fas fa-info-circle"></i> 
                <strong>What happens next?</strong>
                <ul class="mb-0 mt-2">
                    <li>Your request will be visible to matching donors</li>
                    <li>You'll receive notifications when donors respond</li>
                    <li>Nearby hospitals will be notified for critical requests</li>
                </ul>
            </div>
        </div>

        
        <div class="col-lg-4">
            <!-- Active Requests Card -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="fas fa-list"></i> Your Active Requests
                    </h6>
                </div>
                <div class="card-body">
                    <!-- Placeholder (will be dynamic later) -->
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-inbox fa-3x mb-3 opacity-50"></i>
                        <p class="mb-0">No active requests</p>
                        <small>Submit a request to get started</small>
                    </div>
                </div>
            </div>

            <!-- Blood Compatibility Info -->
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="fas fa-exchange-alt"></i> Blood Compatibility
                    </h6>
                </div>
                <div class="card-body">
                    <small class="text-muted">
                        <strong>Can receive from:</strong>
                    </small>
                    <ul class="small mt-2">
                        <li><strong>O-</strong> â†’ Universal donor (all types)</li>
                        <li><strong>O+</strong> â†’ O+, A+, B+, AB+</li>
                        <li><strong>A-</strong> â†’ A-, A+, AB-, AB+</li>
                        <li><strong>A+</strong> â†’ A+, AB+</li>
                        <li><strong>B-</strong> â†’ B-, B+, AB-, AB+</li>
                        <li><strong>B+</strong> â†’ B+, AB+</li>
                        <li><strong>AB-</strong> â†’ AB-, AB+</li>
                        <li><strong>AB+</strong> â†’ Universal receiver</li>
                    </ul>
                </div>
            </div>

            <!-- Emergency Contact -->
            <div class="card shadow-sm mt-4 border-danger">
                <div class="card-body text-center">
                    <h6 class="text-danger">
                        <i class="fas fa-ambulance"></i> Emergency?
                    </h6>
                    <p class="small mb-2">For critical situations, contact:</p>
                    <a href="tel:102" class="btn btn-danger btn-sm">
                        <i class="fas fa-phone"></i> Call 102 (Ambulance)
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}